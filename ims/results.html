<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Gespeicherte Testergebnisse</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    table { border-collapse: collapse; width: 100%; }
    th, td { padding: 10px; border: 1px solid #ddd; }
    th { background: #f4f4f4; }
    button { cursor: pointer; }
  </style>
</head>
<body>
  <h1>Gespeicherte Testergebnisse</h1>
  <table>
    <thead>
      <tr>
        <th>Datum</th>
        <th>Punktzahl</th>
        <th>Details</th>
      </tr>
    </thead>
    <tbody id="resultsTable"></tbody>
  </table>

  <div id="resultDetails"></div>

  <script>
   const quizData = [
  {
    "topic": "Systemtechnik und Hardware",
    "questions": [
      {
        "question": "Frage 1: Welche Komponente verbindet alle anderen Bauteile eines PCs miteinander?",
        "options": {"a": "RAM", "b": "CPU", "c": "Mainboard", "d": "GPU"},
        "answer": "c"
      },
      {
        "question": "Frage 2: Welche Komponente speichert dauerhaft große Datenmengen?",
        "options": {"a": "CPU", "b": "RAM", "c": "SSD", "d": "Netzteil"},
        "answer": "c"
      },
      {
        "question": "Frage 3: Welche Schnittstelle wird zur Stromversorgung aktueller Mainboards verwendet?",
        "options": {"a": "VGA", "b": "SATA", "c": "PCIe", "d": "ATX-Stromanschluss"},
        "answer": "d"
      },
      {
        "question": "Frage 3: Welches Bauteil sorgt hauptsächlich für die Kühlung des Prozessors?",
        "options": {"a": "Gehäuse", "b": "Netzteil", "c": "CPU-Kühler", "d": "SSD"},
        "answer": "c"
      },
      {
        "question": "Frage 4: Was misst man mit der Einheit Gigahertz (GHz)?",
        "options": {"a": "Datenmenge", "b": "Taktfrequenz", "c": "Stromverbrauch", "d": "Temperatur"},
        "answer": "b"
      },
      {
        "question": "Frage 5: Welche Hardware sorgt für drahtlose Netzwerkverbindungen?",
        "options": {"a": "Router", "b": "Monitor", "c": "Maus", "d": "Grafikkarte"},
        "answer": "a"
      }
    ]
  },
  {
    "topic": "Datenbanken",
    "questions": [
      {
        "question": "Frage 1: Welche Art von Datenbank speichert Daten in Dokumenten statt Tabellen?",
        "options": {"a": "SQL-Datenbank", "b": "NoSQL-Datenbank", "c": "Relationale DB", "d": "Flat-File"},
        "answer": "d"
      },
      {
        "question": "Frage 2: Was macht der SQL-Befehl UPDATE?",
        "options": {"a": "Löscht Datensätze", "b": "Fügt Datensätze hinzu", "c": "Ändert Datensätze", "d": "Fragt Datensätze ab"},
        "answer": "c"
      }
    ]
  },
  {
    "topic": "HTML-Grundwissen",
    "questions": [
      {
        "question": "Frage 1: Welches Tag definiert die wichtigste Überschrift?",
        "options": {"a": "<h6>", "b": "<title>", "c": "<h1>", "d": "<p>"},
        "answer": "c"
      },
      {
        "question": "Frage 2: Mit welchem HTML-Element erstellt man ein Textfeld in einem Formular?",
        "options": {"a": "<form>", "b": "<input>", "c": "<button>", "d": "<label>"},
        "answer": "a"
      }
    ]
  },
  {
    "topic": "Programmierung",
    "questions": [
      {
        "question": "Frage 1: Was bedeutet die Abkürzung IDE in der Programmierung?",
        "options": {"a": "Integrated Development Environment", "b": "Internet Data Language", "c": "Input Device", "d": "Intermediate Language"},
        "answer": "a"
      }
    ]
  },
  {
    "topic": "Office",
    "questions": [
      {
        "question": "Frage 1: Wie erstellt man in Excel eine Summe aus Zellen?",
        "options": {"a": "SUMME(A1:A5)", "b": "ADD(A1:A5)", "c": "TOTAL(A1:A5)", "d": "=AUTO(A1:A5)"},
        "answer": "a"
      }
    ]
  }
];








    
    function userReadableOption(options, key) {
      return key ? `(${key}) ${options[key]}` : 'Keine Antwort gewählt';
    }
    
    function loadResults() {
      const results = JSON.parse(localStorage.getItem("resultsFiles") || "[]");
      const resultsBody = document.getElementById("resultsTable");
      resultsBody.innerHTML = "";
    
      results.forEach((result, idx) => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${result.date}</td>
          <td>${result.score}/${result.answers.length}</td>
          <td><button onclick="showDetails(${idx})">Details</button></td>`;
        resultsBody.appendChild(row);
      });
    }
    
    function showDetails(idx) {
      const result = JSON.parse(localStorage.getItem("resultsFiles"))[idx];
      let html = `<h2>Antwortdetails (${result.date})</h2>`;
      let answerIndex = 0; // Hier korrekte Deklaration!
    
      quizData.forEach(section => {
        html += `<h3>${section.topic}</h3>`;
        section.questions.forEach(q => {
          const userAns = result.answers[answerIndex++]; // Korrekt answerIndex verwenden
          html += `
            <p><b>${section.topic + ' - ' + q.question}</b><br>
            <table>
              <tr>
                <td style="width:200px;"><strong>Deine Antwort:</strong></td>
                <td style="${ userAns !== q.answer ? 'color:red;' : 'color:green;' }">
                  ${userReadableOption(q.options, userAns)}
                </td>
              </tr>
              <tr>
                <td><strong>Richtige Antwort:</strong></td>
                <td>${userReadableOption(q.options, q.answer)}</td>
              </tr>
            </table>
            <br>
            <hr>
          `;
        });
      });
    
      document.getElementById('resultDetails').innerHTML = html;
    }
    
    loadResults();
    </script>
    
</body>
</html>
