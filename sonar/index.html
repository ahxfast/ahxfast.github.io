<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Crypto Data</title>
<style>
    body {
        font-family: Arial, sans-serif;
    }

    table {
        width: 100%;
        border-collapse: collapse;
    }

    th, td {
        padding: 8px;
        text-align: left;
        border-bottom: 1px solid #ddd;
    }

    th {
        background-color: #f2f2f2;
    }

    tr:hover {
        background-color: #f5f5f5;
    }
</style>
</head>
<body>
    <div id="data-display">Loading data...</div>
    <table id="data-table" style="display: none;">
        <thead>
            <tr>
                <th>Coin</th>
                <th>VolSpike</th>
                <th>CCI</th>
                <th>RSI 1\4</th>
                <th>TIME</th>
            </tr>
        </thead>
        <tbody>
            <!-- Data rows will be inserted here -->
        </tbody>
    </table>

    <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js"></script>
    <!-- Add Firebase Database -->
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database.js"></script>

    <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js';
    import { getDatabase, ref, onValue } from 'https://www.gstatic.com/firebasejs/9.6.10/firebase-database.js';

    import { firebaseConfig } from './firebase-config.js';

    


    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const dbRef = ref(db, 'sonarV2');

    onValue(dbRef, (snapshot) => {
        const data = snapshot.val();
        const display = document.getElementById('data-display');
        const table = document.getElementById('data-table');
        const tbody = table.querySelector('tbody');

        if (data) {
            display.style.display = 'none'; // Hide the loading text
            table.style.display = 'table'; // Show the table
            tbody.innerHTML = ''; // Clear existing rows

            --coin
            --vpspike
            --sonar
            --cci
            --rsi_1_4
            --sonar_time

            Object.values(data).forEach((item) => {
                const tr = document.createElement('tr');
                tr.innerHTML = `<td>${item.coin}</td><td>${item.vpspike}</td><td>${item.sonar}</td><td>${item.cci}</td><td>${item.rsi_1_4}</td><td>${item.sonar_time}</td>`;
                tbody.appendChild(tr);
            });
        } else {
            display.innerHTML = 'No data available';
        }
    });
    </script>
</body>
</html>
